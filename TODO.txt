IMPLEMENT file write type check
IMPLEMENT @nthreads decorator
